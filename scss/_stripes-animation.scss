$max-height: 500px;
$stripe-green-color: #32cec0;
$stripe-viol-color: #5254ff;
$stripe-lightgreen-color: lightgreen;
$stripe-lightgrey-color: lightgrey;
$transition-time: 1s;
$ease-step: 0.2s;
$random-starts: (
        rand-1: 1,
        rand-2: 2,
        rand-3: 0,
        rand-4: 4,
        rand-5: .8,
        rand-6: 3,
        rand-7: 2.2,
        rand-8: 0.5,
        rand-9: 3,
);

$order-elements: (
        rand-1: 0,
        rand-2: 13px,
        rand-3: 26px,
        rand-4: 39px,
        rand-5: 52px,
        rand-6: 65px,
        rand-7: 78px,
        rand-8: 91px,
        rand-9: 104px
);

.stripe {
  position: relative;
  height: 155px;
}

@mixin mobile-animation($chosen-media, $anima-time, $ease-single-time, $delay) {
  @media (max-width: $chosen-media) {
    animation-duration: $anima-time/4;
    transition: width $anima-time/2 ease-out $ease-single-time*$delay;
  }
}

.stripe {
  width: 50%;

  .bar {
    background-color: $stripe-lightgrey-color;
    width: 0;
    height: 5px;
    position: absolute;
    left: 0;

    @for $i from 1 through 9 {
      &:nth-child(#{$i}) {
        top: map-get($order-elements, rand-#{$i});
        transition: width $transition-time ease-out $ease-step*(map-get($random-starts, rand-#{$i}));
        @include mobile-animation ($max-width-xs, $transition-time, $ease-step, map-get($random-starts, rand-#{$i}));
      }
    }
  }
}

.stripe {
  &.visible .bar {
    width: 100%;

    animation-name: stripe-color;
    animation-duration: $transition-time;
    position: absolute;
    left: 0;

    @for $j from 1 through 9 {
      &:nth-child(#{$j}) {
        animation-delay: $ease-step*map-get($random-starts , rand-#{$j});
      }
    }

    background-color: $second-blue;
  }

  @media (max-width: $max-width-xs) {
    width: 100%;

    &.visible .bar {
      width: 100%;
    }
  }
}

.stripe-right {
  @extend .stripe;
  width: 50vw;
  transform: rotate(180deg);
  
  @media (max-width: $max-width-xs) {
    width: 100%;
  }
}

@keyframes stripe-color {
  0% {
    background-color: $main-blue;
  }
  10% {
    background-color: $main-blue;
  }
  40% {
    background-color: $hover-violet;
  }
  90% {
    background-color: $second-blue;
  }
  100% {
    background-color: $second-blue;
  }
}

